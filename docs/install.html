<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Installation &#8212; MapProxy 1.14.0 Docs</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation on Windows" href="install_windows.html" />
    <link rel="prev" title="MapProxy Documentation" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

<div id="navbar" class="navbar navbar-default ">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="index.html" class="pull-left"><img src="_static/logo.png" height="50">
      </a>
      <a class="navbar-brand" href="index.html">
        <span>
          MapProxy</span>
        <span>1.14.0</span>
      </a>
    </div>
    <div class="collapse navbar-collapse nav-collapse">
      
        
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-new-virtual-environment">Create a new virtual environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-dependencies">Install Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-mapproxy">Install MapProxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-configuration">Create a configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-the-test-server">Start the test server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upgrade">Upgrade</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install_windows.html">Installation on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_osgeo4w.html">Installation on OSGeo4W</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="caches.html">Caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="seed.html">Seeding</a></li>
<li class="toctree-l1"><a class="reference internal" href="coverages.html">Coverages</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapproxy_util.html">mapproxy-util</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapproxy_util_autoconfig.html">mapproxy-util autoconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_examples.html">Configuration examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="inspire.html">INSPIRE View Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="labeling.html">WMS Labeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth.html">Authentication and Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="decorate_img.html">Decorate Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapproxy_2.html">MapProxy 2.0</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-8">
      
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This tutorial guides you to the MapProxy installation process on Unix systems. For Windows refer to <a class="reference internal" href="install_windows.html"><span class="doc">Installation on Windows</span></a>.</p>
<p>This tutorial was created and tested with Debian and Ubuntu, if you’re installing MapProxy on a different system you might need to change some package names.</p>
<p>MapProxy is <a class="reference external" href="https://pypi.org/project/MapProxy/">registered at the Python Package Index</a> (PyPI). If you have Python 2.7.9 or higher, you can install MapProxy with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">MapProxy</span>
</pre></div>
</div>
<p>This is really, easy <cite>but</cite> we recommend to install MapProxy into a <a class="reference external" href="http://guide.python-distribute.org/virtualenv.html">virtual Python environment</a>. A <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> is a self-contained Python installation where you can install arbitrary Python packages without affecting the system installation. You also don’t need root permissions for the installation.</p>
<p><a class="reference external" href="https://virtualenv.pypa.io/en/latest/">Read about virtualenv</a> if you want to know more about the benefits.</p>
<section id="create-a-new-virtual-environment">
<h2>Create a new virtual environment<a class="headerlink" href="#create-a-new-virtual-environment" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> is available as <code class="docutils literal notranslate"><span class="pre">python-virtualenv</span></code> on most Linux systems. You can also <a class="reference external" href="https://virtualenv.pypa.io/en/latest/installation/">install Virtualenv from source</a>.</p>
<p>To create a new environment with the name <code class="docutils literal notranslate"><span class="pre">mapproxy</span></code> call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="o">--</span><span class="n">system</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span> <span class="n">mapproxy</span>
</pre></div>
</div>
<p>You should now have a Python installation under <code class="docutils literal notranslate"><span class="pre">mapproxy/bin/python</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Virtualenv will use your Python system packages (like <code class="docutils literal notranslate"><span class="pre">python-imaging</span></code> or <code class="docutils literal notranslate"><span class="pre">python-yaml</span></code>) only when the virtualenv was created with the <code class="docutils literal notranslate"><span class="pre">--system-site-packages</span></code> option.</p>
</div>
<p>You need to either prefix all commands with <code class="docutils literal notranslate"><span class="pre">mapproxy/bin</span></code>, set your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable to include the bin directory or <cite>activate</cite> the virtualenv with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">mapproxy</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>This will change the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> for your <cite>current</cite> session.</p>
</section>
<section id="install-dependencies">
<h2>Install Dependencies<a class="headerlink" href="#install-dependencies" title="Permalink to this headline">¶</a></h2>
<p>MapProxy is written in Python, thus you will need a working Python installation. MapProxy works with Python 2.7 and 3.4 or higher, which should already be installed with most Linux distributions.</p>
<p>MapProxy requires a few third-party libraries that are required to run. There are different ways to install each dependency. Read <a class="reference internal" href="#dependency-details"><span class="std std-ref">Dependency details</span></a> for a list of all required and optional dependencies.</p>
<section id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>On a Debian or Ubuntu system, you need to install the following packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">pil</span> <span class="n">python</span><span class="o">-</span><span class="n">yaml</span> <span class="n">python</span><span class="o">-</span><span class="n">proj</span>
</pre></div>
</div>
<p>To get all optional packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">libgeos</span><span class="o">-</span><span class="n">dev</span> <span class="n">python</span><span class="o">-</span><span class="n">lxml</span> <span class="n">libgdal</span><span class="o">-</span><span class="n">dev</span> <span class="n">python</span><span class="o">-</span><span class="n">shapely</span>
</pre></div>
</div>
</section>
<section id="dependency-details">
<span id="id2"></span><h3>Dependency details<a class="headerlink" href="#dependency-details" title="Permalink to this headline">¶</a></h3>
<section id="pyproj-or-libproj">
<h4>pyproj or libproj<a class="headerlink" href="#pyproj-or-libproj" title="Permalink to this headline">¶</a></h4>
<p>MapProxy uses the PROJ C library for all coordinate transformation tasks. MapProxy can directly use the C library or via the pyproj Python package.
The internal API of PROJ was updated with PROJ &gt;=5. The old PROJ 4 API is now deprecated and will be removed from future PROJ releases. MapProxy only supports the new API via pyproj and it is therefore recommended to use a recent pyproj version.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.13: </span>Support for new PROJ API via pyproj.</p>
</div>
</section>
<section id="pillow">
<span id="dependencies-pil"></span><h4>Pillow<a class="headerlink" href="#pillow" title="Permalink to this headline">¶</a></h4>
<p>Pillow, the successor of the Python Image Library (PIL), is used for the image processing and it is included in most distributions as <code class="docutils literal notranslate"><span class="pre">python-pil</span></code> or <code class="docutils literal notranslate"><span class="pre">python-imaging</span></code>. Please make sure that you have Pillow installed as MapProxy is no longer compatible with the original PIL. The version of <code class="docutils literal notranslate"><span class="pre">python-imaging</span></code> should be &gt;=3.1.</p>
<p>You can install a new version of Pillow from source with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span> <span class="n">python</span><span class="o">-</span><span class="n">dev</span> <span class="n">libjpeg</span><span class="o">-</span><span class="n">dev</span> \
  <span class="n">zlib1g</span><span class="o">-</span><span class="n">dev</span> <span class="n">libfreetype6</span><span class="o">-</span><span class="n">dev</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">Pillow</span>
</pre></div>
</div>
</section>
<section id="yaml">
<h4>YAML<a class="headerlink" href="#yaml" title="Permalink to this headline">¶</a></h4>
<p>MapProxy uses YAML for the configuration parsing. It is available as <code class="docutils literal notranslate"><span class="pre">python-yaml</span></code>, but you can also install it as a Python package with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">PyYAML</span></code>.</p>
</section>
<section id="shapely-and-geos-optional">
<h4>Shapely and GEOS <em>(optional)</em><a class="headerlink" href="#shapely-and-geos-optional" title="Permalink to this headline">¶</a></h4>
<p>You will need Shapely to use the <a class="reference internal" href="coverages.html"><span class="doc">coverage feature</span></a> of MapProxy. Shapely offers Python bindings for the GEOS library. You need Shapely (<code class="docutils literal notranslate"><span class="pre">python-shapely</span></code>) and GEOS (<code class="docutils literal notranslate"><span class="pre">libgeos-dev</span></code>). You can install Shapely as a Python package with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">Shapely</span></code> if you system does not provide a recent (&gt;= 1.2.0) version of Shapely.</p>
</section>
<section id="gdal-optional">
<h4>GDAL <em>(optional)</em><a class="headerlink" href="#gdal-optional" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="coverages.html"><span class="doc">coverage feature</span></a> allows you to read geometries from OGR datasources (Shapefiles, PostGIS, etc.). This package is optional and only required for OGR datasource support (BBOX, WKT and GeoJSON coverages are supported natively). OGR is part of GDAL (<code class="docutils literal notranslate"><span class="pre">libgdal-dev</span></code>).</p>
</section>
<section id="lxml-optional">
<span id="lxml-install"></span><h4>lxml <em>(optional)</em><a class="headerlink" href="#lxml-optional" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://lxml.de">lxml</a> is used for more advanced WMS FeatureInformation operations like XSL transformation or the concatenation of multiple XML/HTML documents. It is available as <code class="docutils literal notranslate"><span class="pre">python-lxml</span></code>.</p>
</section>
</section>
</section>
<section id="install-mapproxy">
<h2>Install MapProxy<a class="headerlink" href="#install-mapproxy" title="Permalink to this headline">¶</a></h2>
<p>Your virtual environment should contain <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a>, a tool to install Python packages.</p>
<p>To install you need to call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">MapProxy</span>
</pre></div>
</div>
<p>You specify the release version of MapProxy. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">MapProxy</span><span class="o">==</span><span class="mf">1.10</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
<p>or to get the latest 1.10.0 version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="s2">&quot;MapProxy&gt;=1.10.0,&lt;=1.10.99&quot;</span>
</pre></div>
</div>
<p>To check if the MapProxy was successfully installed, you can call the <cite>mapproxy-util</cite> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapproxy</span><span class="o">-</span><span class="n">util</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span></code> will download packages from the <a class="reference external" href="https://pypi.org/">Python Package Index</a> and therefore require full internet access. You need to set the <code class="docutils literal notranslate"><span class="pre">https_proxy</span></code> environment variable if you only have access to the internet via an HTTP proxy. See <a class="reference internal" href="configuration_examples.html#http-proxy"><span class="std std-ref">Access sources through HTTP proxy</span></a> for more information.</p>
</div>
</section>
<section id="create-a-configuration">
<span id="create-configuration"></span><h2>Create a configuration<a class="headerlink" href="#create-a-configuration" title="Permalink to this headline">¶</a></h2>
<p>To create a new set of configuration files for MapProxy call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mapproxy</span><span class="o">-</span><span class="n">util</span> <span class="n">create</span> <span class="o">-</span><span class="n">t</span> <span class="n">base</span><span class="o">-</span><span class="n">config</span> <span class="n">mymapproxy</span>
</pre></div>
</div>
<p>This will create a <code class="docutils literal notranslate"><span class="pre">mymapproxy</span></code> directory with a minimal example configuration (<code class="docutils literal notranslate"><span class="pre">mapproxy.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">seed.yaml</span></code>) and two full example configuration files (<code class="docutils literal notranslate"><span class="pre">full_example.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">full_seed_example.yaml</span></code>).</p>
<p>Refer to the <a class="reference internal" href="configuration.html"><span class="doc">configuration documentation</span></a> for more information. With the default configuration the cached data will be placed in the <code class="docutils literal notranslate"><span class="pre">cache_data</span></code> subdirectory.</p>
</section>
<section id="start-the-test-server">
<h2>Start the test server<a class="headerlink" href="#start-the-test-server" title="Permalink to this headline">¶</a></h2>
<p>To start a test server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">mymapproxy</span>
<span class="n">mapproxy</span><span class="o">-</span><span class="n">util</span> <span class="n">serve</span><span class="o">-</span><span class="n">develop</span> <span class="n">mapproxy</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>There is already a test layer configured that obtains data from the <a class="reference external" href="https://maps.omniscale.com/">Omniscale OpenStreetMap WMS</a>. Feel free to use this service for testing.</p>
<p>MapProxy comes with a demo service that lists all configured WMS and TMS layers. You can access that service at <a class="reference external" href="http://localhost:8080/demo/">http://localhost:8080/demo/</a></p>
</section>
<section id="upgrade">
<h2>Upgrade<a class="headerlink" href="#upgrade" title="Permalink to this headline">¶</a></h2>
<p>You can upgrade MapProxy with pip in combination with a version number or with the <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code> option.
Use the <code class="docutils literal notranslate"><span class="pre">--no-deps</span></code> option to avoid upgrading the dependencies.</p>
<p>To upgrade to version 1.x.y:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="s1">&#39;MapProxy==1.x.y&#39;</span>
</pre></div>
</div>
<p>To upgrade to the latest release:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">MapProxy</span>
</pre></div>
</div>
<p>To upgrade to the current development version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mapproxy</span><span class="o">/</span><span class="n">mapproxy</span><span class="o">/</span><span class="n">tarball</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<section id="changes">
<h3>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h3>
<p>New releases of MapProxy are backwards compatible with older configuration files. MapProxy will issue warnings on start-up if a behavior will change in the next releases. You are advised to upgrade in single release steps (e.g. 1.9.0 to 1.10.0 to 1.11.0) and to check the output of <code class="docutils literal notranslate"><span class="pre">mapproxy-util</span> <span class="pre">serve-develop</span></code> for any warnings. You should also refer to the Changes Log of each release to see if there is anything to pay attention for.</p>
<p>If you upgrade from 0.8, please read the <a class="reference external" href="http://mapproxy.org/docs/1.5.0/migrate.html">old migration documentation</a>.</p>
</section>
</section>
</section>


    </div>
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p>
     
       &copy; Copyright Oliver Tonnhofer, Omniscale, <a href="http://mapproxy.org/about">Legal</a>
     
     <br/>
     
       Last updated on 2021-11-24
     <br/>

     
       Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0.
     
   </p>
 </div>
</footer>
  </body>
</html>